<!doctype html><html><head><meta charset='utf-8'><title>Admin</title><link rel='stylesheet' href='/style.css'><script src='https://cdn.socket.io/4.8.1/socket.io.min.js'></script></head><body><h1>Admin</h1><div class='stage'><img id='img'><div id='clickLayer'></div></div><button id='load'>Load Playlist</button><button id='start'>Start</button><button id='next'>Next</button><button id='reveal'>Reveal</button><button id='judge'>Judge</button><table id='players'></table><script>const s=io({query:{role:'admin'}});const img=document.getElementById('img');const layer=document.getElementById('clickLayer');const players=document.getElementById('players');function draw(st){if(st.round){img.src=st.round.imageUrl;}layer.innerHTML='';(st.players||[]).forEach(p=>{if(!p.click)return;const d=document.createElement('div');d.className='dot';d.style.left=(p.click.x*100)+'%';d.style.top=(p.click.y*100)+'%';d.style.background=p.color;layer.appendChild(d);const r=document.createElement('div');r.className='ring';r.style.left=(p.click.x*100)+'%';r.style.top=(p.click.y*100)+'%';r.style.width=(st.round.clickRadiusPct*2)+'%';r.style.height=(st.round.clickRadiusPct*2)+'%';r.style.borderColor=p.color;layer.appendChild(r);});players.innerHTML='';(st.players||[]).forEach(p=>{players.innerHTML+=`<tr><td>${p.name}</td><td>${p.score}</td></tr>`;});}s.on('admin:state',draw);document.getElementById('load').onclick=async()=>{const d=await (await fetch('/playlist.json')).json();s.emit('admin:setPlaylist',d)};document.getElementById('start').onclick=()=>s.emit('admin:startFromPlaylist');document.getElementById('next').onclick=()=>s.emit('admin:nextInPlaylist');document.getElementById('reveal').onclick=()=>s.emit('admin:revealClicks');document.getElementById('judge').onclick=()=>s.emit('admin:judge');</script></body></html>